var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable,n=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,s=(e,s)=>{for(var o in s||(s={}))t.call(s,o)&&n(e,o,s[o]);if(a)for(var o of a(s))r.call(s,o)&&n(e,o,s[o]);return e};import{c as o,p as l,a as i,o as c,b as d,d as u,t as p,F as h,e as m,w as b,f,r as g,g as y,h as w,l as v,i as _,j as k,v as T,k as C,m as A,n as x,T as S,q as U,s as P,u as j,x as I,y as L,z as R,A as E}from"./vendor.2a1b1931.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const r=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,s)=>{const o=new URL(e,r);if(self[t].moduleMap[o])return a(self[t].moduleMap[o]);const l=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){s(new Error(`Failed to import: ${e}`)),n(i)},onload(){a(self[t].moduleMap[o]),n(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/static/vite/");const{mapState:F}=o("user");var B={computed:F(["first_name","is_authenticated","is_staff"])};const D=b();l("data-v-6aa65b50");const H={key:0,class:"dropdown"},z={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},O={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdownMenuButton1"},q=f("Dashboard"),M=f("My Account"),W=f("User Guide"),V=u("li",null,[u("a",{class:"dropdown-item",href:"/user/logout/"},"Log Out")],-1),$=u("li",null,[u("hr",{class:"dropdown-divider"})],-1),N=u("li",null,[u("h6",{class:"dropdown-header"},"Admin Only")],-1),Z=u("li",null,[u("a",{class:"dropdown-item",href:"/admin/"},"Django Admin")],-1),G=u("li",null,[u("a",{class:"dropdown-item",href:"/manage/celery/"},"Celery Queue Status")],-1),K={key:1,class:"navbar-nav"},Y={class:"nav-item"},J=f("Sign up"),X={class:"nav-item"},Q=f("User Guide"),ee={class:"nav-item"},te=f("Log in");i();const ae=D(((e,t,a,r,n,s)=>{const o=g("router-link");return e.is_authenticated?(c(),d("div",H,[u("button",z,p(e.first_name),1),u("ul",O,[u("li",null,[u(o,{to:{name:"root"},class:"dropdown-item"},{default:D((()=>[q])),_:1})]),u("li",null,[u(o,{to:{name:"account"},class:"dropdown-item",href:"/user/account/"},{default:D((()=>[M])),_:1})]),u("li",null,[u(o,{to:{name:"docs"},class:"dropdown-item"},{default:D((()=>[W])),_:1})]),V,e.is_staff?(c(),d(h,{key:0},[$,N,Z,G],64)):m("",!0)])])):(c(),d("ul",K,[u("li",Y,[u(o,{to:{name:"sign_up"},class:"nav-link",href:"/sign-up/"},{default:D((()=>[J])),_:1})]),u("li",X,[u(o,{to:{name:"docs"},class:"nav-link"},{default:D((()=>[Q])),_:1})]),u("li",ee,[u(o,{to:{name:"login"},class:"nav-link",href:"/user/login"},{default:D((()=>[te])),_:1})])]))}));B.render=ae,B.__scopeId="data-v-6aa65b50";const{mapState:re}=o("globals");var ne={components:{TheMainNav:B},computed:re(["app_name"])};const se=b();l("data-v-7dfa6905");const oe={class:"navbar navbar-expand-lg mb-3 py-3"},le={class:"container-fluid"};i();const ie=se(((e,t,a,r,n,s)=>{const o=g("router-link"),l=g("TheMainNav");return c(),d("nav",oe,[u("div",le,[u(o,{to:{name:"root"},class:"navbar-brand"},{default:se((()=>[f(p(e.app_name),1)])),_:1}),u(l)])])}));ne.render=ie,ne.__scopeId="data-v-7dfa6905";var ce=y({name:"App",components:{TheNavbar:ne}});ce.render=function(e,t,a,r,n,s){const o=g("TheNavbar"),l=g("router-view");return c(),d(h,null,[u(o),u("main",null,[u(l)])],64)};var de={namespaced:!0,state:s({},store_bootstrap.globals),getters:{},actions:{},mutations:{}};function ue(e=""){return e.split("_").map((e=>e.slice(0,1).toUpperCase()+e.slice(1))).join("")}let pe={"Content-Type":"application/json",Accept:"application/json"};const he=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),r=0;r<a.length;r++){var n=a[r].trim();if(n.substring(0,e.length+1)===e+"="){t=decodeURIComponent(n.substring(e.length+1));break}}return t}("csrftoken");he&&(pe["X-CSRFToken"]=he);const me=w.create({headers:pe,paramsSerializer:e=>v.stringify(e,{arrayFormat:"comma"})});me.interceptors.response.use((e=>{var t,a;return!1===(null==(a=null==(t=e.data)?void 0:t.form)?void 0:a.is_valid)?Promise.reject(e.data.form.errors):e}));var be,fe,ge,ye,we,ve,_e={namespaced:!0,state:s({},store_bootstrap.user),getters:{},actions:{update:({commit:e},t)=>me.post("/user/account/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>{e("update",t.data.form.data)})),login:(e,t)=>me.post("/user/login/",t,{headers:{"Content-Type":"multipart/form-data"}}),resetPassword:(e,t)=>me.post("/user/password_reset/",t,{headers:{"Content-Type":"multipart/form-data"}}),changePassword:(e,t)=>me.post("/user/password_change/",t,{headers:{"Content-Type":"multipart/form-data"}}),resetToken:({commit:e})=>me.post("/user/token_reset/").then((t=>{e("updateToken",t.data.token)}))},mutations:{update:(e,t)=>Object.assign(e,t),updateToken:(e,t)=>e.auth_token.key=t}};(fe=be||(be={}))[fe.Pending=0]="Pending",fe[fe.InProgress=1]="InProgress",(ye=ge||(ge={}))[ye.Invalid=0]="Invalid",ye[ye.Failed=1]="Failed",(ve=we||(we={}))[ve.Completed=0]="Completed";const ke=e=>t=>(a,r)=>{if(t){const e=a;a=r,r=e}return a[e]<r[e]?-1:a[e]>r[e]?1:a.id<r.id?-1:a.id>r.id?1:0},Te={url:e=>{const t=ke("url")(e);return(e,a)=>t(s(s({},e),{url:e.validated_url||e.requested_url}),s(s({},a),{url:a.validated_url||a.requested_url}))},created_at:e=>{const t=ke("created_at")(e);return(e,a)=>t(s(s({},e),{created_at:new Date(e.created_at)}),s(s({},a),{created_at:new Date(a.created_at)}))}};var Ce=_({modules:{globals:de,user:_e,captures:{namespaced:!0,state:{all:[],apiContext:{count:null,next:null,previous:null}},getters:{getByProperties:e=>t=>e.all.find((e=>Object.keys(t).reduce(((a,r)=>a&&t[r]==e[r]),!0))),sortedBy:e=>(t,a=!0)=>e.all.sort((Te[t]||ke(t))(a)),processing:e=>e.all.filter((e=>ue(e.status)in be))},actions:{list:({commit:e},t={ordering:"-created_at"})=>me.get("/captures/",{params:t}).then((t=>{e("updateApiContext",t.data),e("replace",t.data.results)})),pageForward:({commit:e,state:t})=>me.get(t.apiContext.next).then((t=>{e("updateApiContext",t.data),e("append",t.data.results)})),create:({commit:e},t)=>me.post("/captures/",t).then((t=>{e("append",t.data)})),read:({commit:e,getters:t},a)=>me.get(`/captures/${a.id}`).then((r=>{const n=t.getByProperties({id:a.id});n?e("update",{obj:n,vals:r.data}):e("append",[r.data])})),batchRead:({commit:e,getters:t},a)=>me.get("/captures/",{params:{id__in:a.map((({id:e})=>e))}}).then((r=>{for(const[n,s]of r.data.results.entries()){const r=t.getByProperties({id:a[n].id});r?e("update",{obj:r,vals:s}):e("append",[s])}})),eagerCreateAndUpdate:({commit:e,getters:t},a)=>{e("append",a),me.post("/captures/",a).then((r=>{for(const[n,s]of r.data.entries())e("update",{obj:t.getByProperties({created_at:a[n].created_at}),vals:s})}))}},mutations:{updateApiContext:(e,t)=>{return Object.assign(e.apiContext,(a=Object.keys(e.apiContext),r=t,a.reduce(((e,t)=>(e[t]=r[t],e)),{})));var a,r},replace:(e,t)=>e.all=t,append:(e,t)=>e.all.push(...t),update:(e,t)=>Object.assign(t.obj,t.vals),destroy:(e,t)=>e.all.splice(e.all.indexOf(t),1)}}}}),Ae={props:["head","subhead"]};const xe=b();l("data-v-635b021c");const Se={class:"text-center display-5"},Ue={key:0,class:"text-center"};i();const Pe=xe(((e,t,a,r,n,s)=>(c(),d(h,null,[u("h1",Se,p(a.head),1),a.subhead?(c(),d("p",Ue,p(a.subhead),1)):m("",!0)],64))));Ae.render=Pe,Ae.__scopeId="data-v-635b021c";const{mapState:je}=o("globals");var Ie={components:{TheMainHeader:Ae},computed:je(["app_name"])};const Le=b()(((e,t,a,r,n,s)=>{const o=g("TheMainHeader");return c(),d(o,{head:e.app_name,subhead:"A Witness Server & Suite of Tools for Journalists and Fact Checkers"},null,8,["head"])}));Ie.render=Le,Ie.__scopeId="data-v-1cb3209a";const{mapActions:Re}=o("captures");var Ee={data:()=>({requested_urls:"",capture_oembed_view:!1,label:""}),computed:{formatted_urls(){return this.requested_urls.trim().split("\n")}},methods:s(s({},Re(["eagerCreateAndUpdate"])),{submit(){this.eagerCreateAndUpdate(this.formatted_urls.map((e=>({requested_url:e,capture_oembed_view:this.capture_oembed_view,label:this.label,created_at:(new Date).toISOString()})))),this.$refs.form.reset()}})};const Fe=b();l("data-v-4fcc075a");const Be={class:"mb-3"},De=u("label",{for:"requested_urls",class:"form-label"},"URLs",-1),He={class:"mb-3 form-check"},ze=u("label",{for:"capture_oembed_view",class:"form-check-label"},"Archive Embedded Version (if available)",-1),Oe={class:"mb-3"},qe=u("label",{for:"label",class:"form-label"},"Label (Optional)",-1),Me=u("button",{type:"submit",class:"btn btn-primary mb-3"},"Capture",-1);i();const We=Fe(((e,t,a,r,n,s)=>(c(),d("form",{ref:"form",class:"capture-form p-3",onSubmit:t[4]||(t[4]=A(((...e)=>s.submit&&s.submit(...e)),["prevent"])),onKeydown:[t[5]||(t[5]=x(A(((...e)=>s.submit&&s.submit(...e)),["shift","exact","prevent"]),["enter"])),t[6]||(t[6]=x(A(((...e)=>s.submit&&s.submit(...e)),["meta","exact","prevent"]),["enter"]))]},[u("div",Be,[De,k(u("textarea",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.requested_urls=t),id:"requested_urls",class:"form-control",rows:"3",required:"",placeholder:"Enter one or more URLs on each line","aria-describedby":"urls-errors","aria-invalid":"false"},null,512),[[T,e.requested_urls]])]),u("div",He,[k(u("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.capture_oembed_view=t),id:"capture_oembed_view",type:"checkbox",class:"form-check-input"},null,512),[[C,e.capture_oembed_view]]),ze]),u("div",Oe,[qe,k(u("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.label=t),id:"label",type:"text",class:"form-control"},null,512),[[T,e.label]])]),Me],544))));Ee.render=We,Ee.__scopeId="data-v-4fcc075a";const{mapActions:Ve}=o("captures");var $e={props:["capture"],data:()=>({displayContext:!1}),computed:{statusOrDefault(){return this.capture.status||"pending"},isProcessing(){return ue(this.statusOrDefault)in be},hasFailed(){return ue(this.statusOrDefault)in ge},url(){return this.capture.validated_url||this.capture.requested_url},formattedDate(){return new Date(this.capture.created_at).toLocaleDateString()},statusBG(){return{invalid:"danger",pending:"secondary",in_progress:"primary",completed:"success",failed:"danger"}[this.statusOrDefault]},downloadUrl(){return this.capture.archive?this.capture.archive.download_url:null}},methods:s(s({},Ve(["read"])),{toggleContext(){this.displayContext=!this.displayContext}})};const Ne=b();l("data-v-5c274cd6");const Ze={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Ge={key:1,class:"bi bi-x"},Ke={key:2,class:"bi bi-check"},Ye={key:0},Je={colspan:"999",class:"p-0"},Xe={key:0,class:"contextItem"},Qe={class:"alert alert-danger"};i();const et=Ne(((e,t,a,r,n,s)=>(c(),d(h,null,[u("tr",null,[u("td",null,[u("span",{class:["status badge",`bg-${s.statusBG}`]},[s.isProcessing?(c(),d("span",Ze)):s.hasFailed?(c(),d("span",Ge)):(c(),d("span",Ke))],2)]),u("td",null,[u("a",{href:s.url},p(s.url),9,["href"])]),u("td",null,p(a.capture.label||"-"),1),u("td",null,[k(u("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>a.capture.capture_oembed_view=e),id:"flexCheckDisabled",disabled:""},null,512),[[C,a.capture.capture_oembed_view]])]),u("td",null,p(s.formattedDate),1),u("td",null,[s.downloadUrl?(c(),d(h,{key:0},[u("a",{role:"button",class:"btn btn-primary bi bi-download mx-1",href:s.downloadUrl},null,8,["href"]),u("a",{role:"button",class:["btn btn-primary bi bi-chevron-up mx-1 replayToggle",{active:e.displayContext}],onClick:t[2]||(t[2]=(...e)=>s.toggleContext&&s.toggleContext(...e))},null,2)],64)):m("",!0),a.capture.message?(c(),d("a",{key:1,role:"button",class:"btn btn-primary bi bi-question-diamond mx-1",onClick:t[3]||(t[3]=(...e)=>s.toggleContext&&s.toggleContext(...e))})):m("",!0)])]),u(S,{name:"slide"},{default:Ne((()=>[e.displayContext?(c(),d("tr",Ye,[u("td",Je,[a.capture.message?(c(),d("div",Xe,[u("div",Qe,p(a.capture.message),1)])):m("",!0),s.downloadUrl?(c(),d("replay-web-page",{key:1,source:s.downloadUrl,url:s.url,replaybase:"/replay/",class:"replay contextItem"},null,8,["source","url"])):m("",!0)])])):m("",!0)])),_:1})],64))));$e.render=et,$e.__scopeId="data-v-5c274cd6";const{mapGetters:tt,mapActions:at,mapState:rt}=o("captures");var nt={poller:null,components:{CaptureListItem:$e},data:()=>({loading:!0,sortBy:"created_at",sortDesc:!0,headings:{status:"Status",url:"URL",label:"Label",capture_oembed_view:"Embedded Version",created_at:"Created At"}}),computed:s(s(s({},tt({processing:"processing",captures:"sortedBy"})),rt({apiContext:"apiContext"})),{apiParams(){return{ordering:(this.sortDesc?"-":"")+this.sortBy}}}),methods:s(s({},at(["list","pageForward","batchRead"])),{pollForProcessingChanges(){this.$options.poller=setInterval((()=>{this.batchRead(this.processing)}),3e3)},clearProcessingPoll(){clearInterval(this.$options.poller)},clearScrollListener(){window.removeEventListener("scroll",this.handleScroll)},changeSort(e){this.sortBy==e?this.sortDesc=!this.sortDesc:(this.sortBy=e,this.sortDesc=!0)},handleScroll(e){this.$refs.tableBody.getBoundingClientRect().bottom<window.innerHeight&&(this.clearScrollListener(),this.loading=!0,this.pageForward().then((()=>this.loading=!1)))}}),watch:{apiParams:{deep:!0,handler(){this.list(this.apiParams)}},apiContext:{deep:!0,handler(e,t){e.next?window.addEventListener("scroll",this.handleScroll):this.clearScrollListener()}},processing(e,t){this.$options.poller?e.length||this.clearProcessingPoll():e.length&&this.pollForProcessingChanges()}},created(){this.list().then((()=>this.loading=!1))},unmounted(){this.clearScrollListener(),this.clearProcessingPoll()}};const st=b();l("data-v-4cfa4e63");const ot={class:"table"},lt={scope:"col"},it=u("th",{scope:"col"},"Actions",-1),ct={ref:"tableBody"},dt={key:0},ut=u("td",{colspan:"999"}," Loading more... ",-1);i();const pt=st(((e,t,a,r,n,s)=>{const o=g("CaptureListItem");return c(),d("table",ot,[u("thead",null,[u("tr",null,[(c(!0),d(h,null,U(e.headings,((t,a)=>(c(),d("th",lt,[u("a",{onClick:e=>s.changeSort(a),role:"button",class:[e.sortBy==a?"active":"","sortButton"]},[f(p(t)+" ",1),u("span",{class:["bi-sort-"+(e.sortDesc||e.sortBy!=a?"down":"up"),"sortIcon bi"]},null,2)],10,["onClick"])])))),256)),it])]),u("tbody",ct,[(c(!0),d(h,null,U(e.captures(e.sortBy,e.sortDesc),(e=>(c(),d(o,{key:e.id,capture:e},null,8,["capture"])))),128)),e.loading?(c(),d("tr",dt,[ut])):m("",!0)],512)])}));nt.render=pt,nt.__scopeId="data-v-4cfa4e63";var ht={components:{TheMainHeader:Ae,CaptureForm:Ee,CaptureList:nt},mounted(){const e=document.createElement("script");e.setAttribute("src","https://cdn.jsdelivr.net/npm/replaywebpage@1.3.9/ui.js"),document.head.appendChild(e)}};const mt=b();l("data-v-3ac5b41c");const bt={class:"mt-5"},ft={class:"mt-5"};i();const gt=mt(((e,t,a,r,n,s)=>{const o=g("TheMainHeader"),l=g("CaptureForm"),i=g("CaptureList");return c(),d(h,null,[u(o,{head:"Create a new archive",subhead:"Enter any URL to capture it in a downloadable archive."}),u("div",bt,[u(l)]),u("div",ft,[u(i)])],64)}));ht.render=gt,ht.__scopeId="data-v-3ac5b41c";const{mapState:yt}=o("user");var wt={components:{TheLandingPage:Ie,TheDashboard:ht},computed:yt(["is_authenticated"])};const vt=b()(((e,t,a,r,n,s)=>{const o=g("TheDashboard"),l=g("TheLandingPage");return e.is_authenticated?(c(),d(o,{key:0})):(c(),d(l,{key:1}))}));wt.render=vt,wt.__scopeId="data-v-f8f7de50";var _t={components:{TheMainHeader:Ae},data:()=>({rwp_base_url:"",sw_path:"",auth_token_key:"your-api-key"}),computed:{base_url:()=>window.location.origin}};const kt={class:"row mt-5"},Tt=j('<div class="col-sm-4"><h2 class="h4">Table of Contents</h2><ul class="list-unstyled"><li><a href="#capturing-urls">Capturing URLs</a><ul><li><a href="#capturing-ui">Using the Web Interface</a></li><li><a href="#capturing-api">Using the API</a><ul><li><a href="#capturing-auth">Authorization</a></li><li><a href="#capturing-endpoints">Endpoints</a></li></ul></li><li><a href="#capturing-advanced-features">Advanced Features</a><ul><li><a href="#capturing-oembed">oEmbed Captures</a></li><li><a href="#webhook-notifications">Webhooks</a></li><li><a href="#zapier-integration">Zapier Integration</a></li></ul></li><li><a href="#capturing-under-development">Features in Development</a><ul><li>Archive Hashes</li></ul></li></ul></li><li><a href="#viewing-captured-urls">Viewing Captured URLs</a><ul><li><a href="#embed-instructions">How to Embed</a></li><li><a href="#embed-examples">Examples</a><ul><li>Glitch</li></ul></li></ul></li></ul></div>',1),Ct={class:"col"},At=u("p",{class:"lead"},[f("The Perma.cc capture system is built on "),u("a",{href:"https://github.com/webrecorder"},"Webrecorder"),f(" technology and uses an automated browser to produce high-fidelity web archives.")],-1),xt=u("p",null,[f("A "),u("a",{href:"https://github.com/webrecorder/wacz-format"},"web archive file"),f(' is created for each submitted URL, and each archive can be downloaded, embedded in a web page and displayed ("replayed") by any '),u("a",{href:"https://caniuse.com/serviceworkers"},"modern browser"),f(".")],-1),St=u("h2",{id:"capturing-urls"},"Capturing URLs",-1),Ut=u("h3",{id:"capturing-ui"},"Using the Web Interface",-1),Pt=f("After logging in, simply "),jt=f("enter the URLs"),It=f(' you\'d like to preserve and click "Capture." A capture job will be launched for each submitted URL.'),Lt=u("p",null,[f("A list of all your active capture jobs will appear beneath the form. When each job is finished, you can click "),u("img",{style:{width:"1.5em",height:"1.5em","vertical-align":"top"},alt:"the preview button",title:"Preview Capture",src:"/static/vite/preview.e6fb6c31.svg"}),f(" to preview the capture, and "),u("img",{style:{width:"1.1em",height:"1.1em"},alt:"the download button",title:"Download Capture",src:"/static/vite/download.757723f9.svg"}),f(" to download the web archive file.")],-1),Rt=u("p",null,[u("img",{style:{"max-width":"100%"},src:"/static/vite/dashboard-screenshot.fe6ece90.png",alt:"Screenshot of the dashboard. The 'create a new archive' form is above a list of 2 capture jobs, with their download and preview buttons circled."})],-1),Et=u("p",null,"Capture jobs are retained for 4 hours and then are automatically deleted. Deleted capture jobs cannot be recovered from the service.",-1),Ft=u("p",null,[f("Read more about other options under "),u("a",{href:"#capturing-advanced-features"},"advanced features"),f(" and "),u("a",{href:"#capturing-under-development"},"features in development"),f(".")],-1),Bt=u("h3",{id:"capturing-api"},"Using the API",-1),Dt={key:0},Ht=f("Your API Key is "),zt=u("h4",{id:"capturing-auth"},"Authorization ",-1),Ot=f("All registered users receive an "),qt=f("API key"),Mt=f(". Every request to the API must be authenticated by providing that key as part of the "),Wt=u("code",null,"Authorization",-1),Vt=f(" header:"),$t=u("h4",{id:"capturing-endpoints"},"Endpoints",-1),Nt=f("You can create archives programmatically by sending an HTTP "),Zt=u("code",null,"POST",-1),Gt=f(" to "),Kt=f("."),Yt=u("p",null,[f("Required data (JSON-formatted): "),u("code",null,'"urls"'),f(" (a list of URLs to capture, each explicitly prefixed by "),u("code",null,"http"),f(" or "),u("code",null,"https"),f(").")],-1),Jt=u("p",null,[f("Optionally, you may also specify a "),u("code",null,'"tag"'),f(" (a nickname for this batch of URLs, for your convenience). If you are subscribed to "),u("a",{href:"#webhook-notifications"},"webhook notifications"),f(", you may also optionally specify a "),u("code",null,'"userDataField"'),f(" for your convenience (a string you would like included, verbatim, in the webhook notification response).")],-1),Xt=u("p",null,[f("Here's a request to archive a small batch of two URLs using "),u("code",null,"curl"),f(":")],-1),Qt=u("p",null,"The response, on success, will be a JSON dictionary including a jobid for each submitted URL:",-1),ea=u("pre",null,[u("code",null,'{\n        "urls": 2,\n        "jobids": ["uuid4-1", "uuid4-2"]\n        }\n    ')],-1),ta=f("You can then query "),aa=f(" to see all the capture jobs you have in the system:"),ra=u("p",null,"Sample Response:",-1),na=u("pre",null,[u("code",null,'{\n        "jobs": [{\n        "jobid": "uuid4-1",\n        "userid": "3",\n        "captureUrl": "https://twitter.com/permacc",\n        "useEmbeds": false,\n        "userTag": "my-batch",\n        "startTime": "2020-09-28T23:54:19+00:00",\n        "elapsedTime": "2020-09-28T23:56:45+00:00",\n        "accessUrl": null,\n        "status": "In progress"\n        }, {\n        "jobid": "uuid4-2",\n        "userid": "3",\n        "captureUrl": "https://example.com/",\n        "useEmbeds": false,\n        "userTag": "my-batch",\n        "startTime": "2020-09-28T23:54:19+00:00",\n        "elapsedTime": "2020-09-28T23:54:39+00:00",\n        "status": "Complete",\n        "accessUrl": "https://permacaptures.example.com/path/to/download/mycapture.wacz"\n        }]\n        }\n    ')],-1),sa=u("p",null,[f("The response will list all active capture jobs created by your account. Each job will have a "),u("code",null,'"status"'),f(" field, set to either "),u("code",null,"In progress"),f(", "),u("code",null,"Failed"),f(", or "),u("code",null,"Complete"),f(".")],-1),oa=u("p",null,[f("A job that is "),u("code",null,"In progress"),f(" should be monitored until it is "),u("code",null,"Complete"),f(". (Or, if you'd like to be notified when a job is complete, check out "),u("a",{href:"#webhook-notifications"},"webhook notifications"),f(".) A "),u("code",null,"Failed"),f(" job indicates a permanent failure to produce a capture: you may wish to retry.")],-1),la=u("p",null,[f("A job that is "),u("code",null,"Complete"),f(" will have an "),u("code",null,"accessUrl"),f(" set to a downloadable URL. The download URL is valid for 4 hours after the job is completed.")],-1),ia=u("p",null,[f("All information about a capture job is automatically deleted after 4 hours. (Learn more about the "),u("a",{href:"#archive-hashes"},"information we retain"),f(".)")],-1),ca=u("p",null,[f("Read more about other options under "),u("a",{href:"#capturing-advanced-features"},"advanced features"),f(" and "),u("a",{href:"#capturing-under-development"},"features in development"),f(".")],-1),da=u("h3",{id:"capturing-advanced-features"},"Advanced Features",-1),ua=u("h4",{id:"capturing-oembed"},'Capture of "Embeddable" Views',-1),pa=u("p",null,[f('Many websites offer an easily-embeddable "'),u("a",{href:"https://oembed.com/"},"oEmbed"),f('" view of snippets of their content. For example, Twitter provides the following embeddable view of the Tweet at '),u("a",{href:"https://twitter.com/permacc/status/1039225277119954944"},"https://twitter.com/permacc/status/1039225277119954944"),f(":")],-1),ha=u("blockquote",{class:"twitter-tweet"},[u("p",{lang:"en",dir:"ltr"},[f("Are you someone who cites to the internet a lot? The web's a wonderful resource but can be more fragile than you think. Anyone working in "),u("a",{href:"https://twitter.com/hashtag/academia?src=hash&ref_src=twsrc%5Etfw"},"#academia"),f(", "),u("a",{href:"https://twitter.com/hashtag/journalism?src=hash&ref_src=twsrc%5Etfw"},"#journalism"),f(", "),u("a",{href:"https://twitter.com/hashtag/legaltech?src=hash&ref_src=twsrc%5Etfw"},"#legaltech"),f("- any industry that depends on reliable citations should be on the offense against "),u("a",{href:"https://twitter.com/hashtag/linkrot?src=hash&ref_src=twsrc%5Etfw"},"#linkrot"),f(", Perma can help! "),u("a",{href:"https://t.co/XVwEwa2zEA"},"pic.twitter.com/XVwEwa2zEA")]),f("â€” Perma.cc (@permacc) "),u("a",{href:"https://twitter.com/permacc/status/1039225277119954944?ref_src=twsrc%5Etfw"},"September 10, 2018")],-1),ma=u("p",null,'When submitting URLs for capture, you may indicate that when a target website provides support for an "oEmbed" view, the web archive should include a capture of that view, along with the standard web view.',-1),ba=u("p",null,[f('Using the web interface: check the "Archive Embedded Version" box. Using the API: include '),u("code",null,'"embeds": true'),f(" in your "),u("code",null,"POST"),f(" data.")],-1),fa=u("p",null,[f("Capture via oEmbed is currently supported for Twitter, Instagram, Facebook, YouTube, and SlideShare. Additional domains may be supported in the future; an up-to-date list of "),u("a",{href:"https://github.com/ikreymer/permafact-backend/blob/master/driver/embeds.json"},"supported domains and URL patterns"),f(" is available on Github.")],-1),ga=u("h4",{id:"webhook-notifications"},"Webhook Notifications",-1),ya=u("p",null,[f("We can notify you when your capture jobs are complete by sending an HTTP "),u("code",null,"POST"),f("to a callback URL you specify.")],-1),wa=f("To subscribe to the "),va=u("code",null,"ARCHIVE_CREATED",-1),_a=f(" event, "),ka=u("code",null,"POST",-1),Ta=f(" your callback URL to "),Ca={href:"/webhooks/"},Aa=f("."),xa=u("p",null,[f("We'll send back a subscription "),u("code",null,"id"),f(", as well as a "),u("code",null,"signingKey"),f(" and "),u("code",null,"signingKeyAlgorithm"),f(" that you can optionally use to verify that any "),u("code",null,"POST"),f(" received by your callback URL is really from us.")],-1),Sa=u("pre",null,[u("code",null,'{\n        "id": 53,\n        "user": 3,\n        "eventType": "ARCHIVE_CREATED",\n        "signingKey": "a-128-character-key"\n        "signingKeyAlgorithm": "sha256"\n        }\n    ')],-1),Ua=u("p",null,"You can subscribe as many times as you like, if you'd like multiple callback URLs to be notified.",-1),Pa=u("p",null,[f("When an archive you request is complete, we'll make a "),u("code",null,"POST"),f(" to your callback like the following:")],-1),ja=u("pre",null,[u("code",null,'{\n        "userid": 3,\n        "jobid": "uuid4-1",\n        "url": "http://cnn.com",\n        "accessUrl": "https://permacaptures.example.com/path/to/download/mycapture.wacz",\n        "userDataField": ""\n        }\n    ')],-1),Ia=u("p",null,[f("We will include the signature in the "),u("code",null,"X-Hook-Signature"),f(" header.")],-1),La=u("p",null,"If you want to verify the signature before acting, here's how to do it in Python:",-1),Ra=u("pre",null,[u("code",null,"import hmac\n        import urllib\n        def is_valid_signature(signature, data, signing_key, signing_key_algorithm):\n        return hmac.compare_digest(\n        signature,\n        hmac.new(\n        bytes(signing_key, 'utf-8'),\n        bytes(urllib.parse.urlencode(data, doseq=True), 'utf-8'),\n        signing_key_algorithm\n        ).hexdigest()\n        )\n    ")],-1),Ea=u("p",null,"...and JavaScript:",-1),Fa=u("pre",null,[u("code",null,"const crypto = require('crypto');\n        const querystring = require('querystring');\n        function isValidSignature(signature, data, signingKey, signingKeyAlgorithm){\n        const postedSignature = Buffer.from(signature, 'utf-8');\n        const generatedSignature = Buffer.from(\n        crypto\n        .createHmac(signingKeyAlgorithm, signingKey)\n        .update(querystring.stringify(data))\n        .digest('hex'),\n        'utf-8'\n        );\n        try {\n        return crypto.timingSafeEqual(postedSignature, generatedSignature);\n        } catch (e) {\n        return false;\n        }\n        }\n    ")],-1),Ba=u("p",null,"If you no longer wish to receive notifications, you can delete your subscription:",-1),Da=u("h4",{id:"zapier-integration"},"Zapier Integration",-1),Ha=u("p",null,[u("a",{href:"https://zapier.com"},"Zapier"),f(" users can integrate the Perma.cc capture service in their workflows.")],-1),za=u("p",null,[f("For example, using this Zap, you can "),u("a",{href:"https://zapier.com/shared/3ee9336c0d9734d9fe6cc86e672b530f8336e93b"},"archive a URL straight from Slack"),f(", and this Zap will follow up, posting a "),u("a",{href:"https://zapier.com/app/editor/108033832/nodes/108033832"},"link to the completed archive as a reply"),f(", when it's finished.")],-1),Oa=u("p",null,[u("img",{style:{"max-width":"100%"},src:"/static/vite/slack-screenshot.46ab25e6.png",alt:"Screenshot of Slack, showing a capture request and a threaded reply with a link to the archive."})],-1),qa=u("p",null,[f("This Zap, on the other hand, will post to a pre-configured Slack channel of your choice whenever "),u("a",{href:"https://zapier.com/shared/e1ccf1faa9b236b2317b85b46f0a643e8259aa77"},"an archive created by your account is ready to be downloaded"),f(".")],-1),Ma=u("p",null,"Let us know if you are interested in a Zapier integration, and we'll help you get started!",-1),Wa=u("p",null,[f("Note: Zapier does not support "),u("a",{href:"http://resthooks.org/docs/security/"},"signature validation"),f(", instead relying on the privacy of subscription URLs for security. If you need to further verify the authenticity of data triggering your workflows, we recommend working with our webhooks directly.")],-1),Va=u("h3",{id:"capturing-under-development"},"Features in Development",-1),$a=u("h4",{id:"archive-hashes"},"Archive Hashes",-1),Na=u("p",null,[f("We maintain a "),u("code",null,"sha-256"),f(" hash of every web archive file produced by the service, along with the timestamp of its production and the user id of the requesting user. We don't store any other metadata about capture jobs, including the target URL.")],-1),Za=u("p",null,[f("We selected "),u("code",null,"sha256"),f(", despite its known limitations, because we wanted the algorithm to be "),u("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/digest"},"supported in JavaScript"),f(", and we weren't sure it was reasonable to expect users attempting to verify file hashes to manually calculate "),u("code",null,"sha512/256"),f(".")],-1),Ga=u("p",null,"Let us know if that sounds correct to you!",-1),Ka=u("hr",null,null,-1),Ya=u("h2",{id:"viewing-captured-urls"},"Viewing Captured URLs",-1),Ja=u("p",null,[f("The downloadable WACZ files can be embedded in your site using the "),u("a",{href:"https://replayweb.page"},"ReplayWeb.page"),f(" embed system, loaded directly from NPM.")],-1),Xa=u("h3",{id:"embed-instructions"},"How to Embed",-1),Qa=f("The replay system requires you to host a single JavaScript file on your server, which visitors browsers will use to install the service worker that handles playbacks. We recommend putting it in an empty directory, for example at "),er=u("code",null,"/replay/sw.js",-1),tr=f(". This file must be named "),ar=u("code",null,"sw.js",-1),rr=f(", and it should contain the following: "),nr=f("Each page that will contain embedded archives should include the following script and should also set the height for the "),sr=u("code",null,"replay-web-page",-1),or=f(" tag to ensure a minimum height. (600px is used as an example here). "),lr=u("li",null,[f("For each web archive/WACZ you'd like to embed, simply add the following HTML snippet: "),u("pre",null,[u("code",null,'<replay-web-page\n            source="https://mysite.example.com/path/to/archives/mycapture.wacz"\n            url="https://example.com/"\n            replayBase="/replay/"\n            />\n      ')])],-1),ir=u("p",null,[f("The "),u("code",null,"source"),f(" attribute should point to the URL of where the WACZ file is hosted, while the "),u("code",null,"url"),f(" is the URL captured. The "),u("code",null,"replayBase"),f(" is the path that contains the "),u("code",null,"sw.js"),f(" file. ("),u("code",null,"/replay/"),f(" in this example is also the default, and therefore could be omitted.)")],-1),cr=u("p",null,"The web server hosting WACZ files must support HTTP/1.1 range requests and be able to read portions of a file. If the WACZ file is hosted on a different domain than your site, CORS rules will also need to be enabled on the hosting server.",-1),dr=u("h3",{id:"embed-examples"},"Examples",-1),ur=u("p",null,"The following two archives were created using this system:",-1),pr=u("ul",null,[u("li",null,[u("a",{href:"https://permafact-demo.s3.amazonaws.com/twitter.com-2020-09-03.wacz"},"https://permafact-demo.s3.amazonaws.com/twitter.com-2020-09-03.wacz")]),u("li",null,[u("a",{href:"https://permafact-demo.s3.amazonaws.com/www.youtube.com-2020-09-03.wacz"},"https://permafact-demo.s3.amazonaws.com/www.youtube.com-2020-09-03.wacz")])],-1),hr=u("p",null,"We'll embed a replay of the first archive using the following code:",-1),mr=u("pre",null,[u("code",null,'<replay-web-page\n        source="https://permafact-demo.s3.amazonaws.com/twitter.com-2020-09-03.wacz"\n        url="https://twitter.com/dog_rates/status/1298052245209006086?s=20"\n        ></replay-web-page>\n    ')],-1),br=u("replay-web-page",{source:"https://permafact-demo.s3.amazonaws.com/twitter.com-2020-09-03.wacz",url:"https://twitter.com/dog_rates/status/1298052245209006086?s=20",replayBase:"{{ rwp_base_url }}/"},null,-1),fr=f("The service worker is loaded from "),gr=f(". Since that's the default path, no further configuration is needed."),yr=u("p",null,"We'll embed a replay of the second archive using the following code:",-1),wr=u("pre",null,[u("code",null,'<replay-web-page\n        source="https://permafact-demo.s3.amazonaws.com/www.youtube.com-2020-09-03.wacz"\n        url="https://www.youtube.com/watch?v=dIUwVMDI7yE",\n        replayBase="/replay/"\n        ></replay-web-page>\n    ')],-1),vr=u("replay-web-page",{source:"https://permafact-demo.s3.amazonaws.com/www.youtube.com-2020-09-03.wacz",url:"https://www.youtube.com/watch?v=dIUwVMDI7yE",replayBase:"{{ rwp_base_url }}/"},null,-1),_r=u("p",null,[f("Here, we redundantly configure "),u("code",null,"replayBase"),f(" to point to "),u("code",null,"/replay/"),f(", the path where "),u("code",null,"sw.js"),f(" for demonstration purposes.")],-1),kr=u("h4",null,"Glitch",-1),Tr=u("p",null,[f("A fully stand-alone example of these embeds is also available on "),u("a",{href:"https://permafact-demo.glitch.me/"},"Glitch"),f(".")],-1);_t.render=function(e,t,a,r,n,s){const o=g("TheMainHeader"),l=g("router-link");return c(),d(h,null,[u(o,{head:"User Guide"}),u("div",kt,[Tt,u("div",Ct,[At,xt,St,Ut,u("p",null,[Pt,u(l,{to:{name:"root"}},{default:P((()=>[jt])),_:1}),It]),Lt,Rt,Et,Ft,Bt,e.auth_token_key?(c(),d("p",Dt,[u("em",null,[Ht,u("code",null,p(e.auth_token_key),1)])])):m("",!0),zt,u("p",null,[Ot,u(l,{to:{name:"account"}},{default:P((()=>[qt])),_:1}),Mt,Wt,Vt]),u("pre",null,[u("code",null,'curl -H "Authorization: Token '+p(e.auth_token_key)+'" '+p(s.base_url)+"...\n    ",1)]),$t,u("p",null,[Nt,Zt,Gt,u("code",null,p(s.base_url+"/captures/"),1),Kt]),Yt,Jt,Xt,u("pre",null,[u("code",null,'curl -X POST \\\n        -H "Content-Type: application/json" \\\n        -H "Authorization: Token '+p(e.auth_token_key)+'" \\\n        --data \'{ \\\n        "urls": [ \\\n        "https://twitter.com/permacc", \\\n        "https://example.com/" \\\n        ], \\\n        "tag": "my-batch", \\\n        "userDataField": "foo=bar&boo=baz" \\\n        }\' \\\n        '+p(s.base_url+"/captures/")+"\n    ",1)]),Qt,ea,u("p",null,[ta,u("code",null,p(s.base_url+"/captures/"),1),aa]),u("pre",null,[u("code",null,'curl -H "Authorization: Token '+p(e.auth_token_key)+'" '+p(s.base_url+"/captures/")+"\n    ",1)]),ra,na,sa,oa,la,ia,ca,da,ua,pa,ha,ma,ba,fa,ga,ya,u("p",null,[wa,va,_a,ka,Ta,u("a",Ca,p(s.base_url+"/webhooks/"),1),Aa]),u("pre",null,[u("code",null,'curl -X POST \\\n        -H "Content-Type: application/json" \\\n        -H "Authorization: Token '+p(e.auth_token_key)+'" \\\n        --data \'{ \\\n        "callbackUrl": https://mysite.com/callback", \\\n        "eventType": "ARCHIVE_CREATED"\n        }\' \\\n        '+p(s.base_url+"/webhooks/")+"\n    ",1)]),xa,Sa,Ua,Pa,ja,Ia,La,Ra,Ea,Fa,Ba,u("pre",null,[u("code",null,'curl -X DELETE -H "Authorization: Token '+p(e.auth_token_key)+'" '+p(s.base_url+"/webhooks/53")+"\n    ",1)]),Da,Ha,za,Oa,qa,Ma,Wa,Va,$a,Na,Za,Ga,Ka,Ya,Ja,Xa,u("ol",null,[u("li",null,[Qa,er,tr,ar,rr,u("pre",null,[u("code",null,'importScripts("'+p(e.rwp_base_url)+'/sw.js");\n      ',1)])]),u("li",null,[nr,sr,or,u("pre",null,[u("code",null,'<script src="'+p(e.rwp_base_url)+'/ui.js"><\/script>\n            <style>\n            replay-web-page {\n            height: 600px;\n            display: flex;\n            }\n            </style>\n      ',1)])]),lr]),ir,cr,dr,ur,pr,hr,mr,br,u("p",null,[fr,u("a",{href:e.sw_path},[u("code",null,p(e.sw_path),1)],8,["href"]),gr]),yr,wr,vr,_r,kr,Tr])])],64)};const{mapState:Cr}=o("globals");var Ar={components:{TheMainHeader:Ae},computed:Cr(["app_name","contact_email","allow_signups"])};const xr=b();l("data-v-69e2bbae");const Sr=u("a",{href:"https://perma.cc"},"Perma.cc",-1),Ur=f(" is a service that prevents link rot, creating permanent, citable records of web content for authors. "),Pr=f(" is powered by the same technology... but delivers the web archive straight to you. "),jr={class:"row mt-5 gx-5"},Ir={class:"col"},Lr={method:"POST",class:"u-full-width"},Rr={class:"small"},Er=u("a",{href:"https://perma.cc/"},"Perma.cc",-1),Fr=f(". By signing up, you agree to the "),Br=u("a",{href:"https://perma.cc/terms-of-service"},"Perma.cc Terms of Service",-1),Dr=f("."),Hr=u("button",{class:"button-primary",type:"submit"},"Sign up",-1),zr=u("h2",null,"Interested?",-1),Or=f("Just "),qr=f(" how you you'd like to use the service, and we can send you an invitation!"),Mr=u("p",null,"(While in beta, we are invitation-only, but we plan to be available for general use soon!)",-1),Wr=f("Learn more."),Vr=j('<div class="col" data-v-69e2bbae><h2 data-v-69e2bbae>Make an archive</h2><p data-v-69e2bbae>Use our state-of-the-art capture service and API to document what you see on the web.</p><h2 data-v-69e2bbae>Store it where you please</h2><p data-v-69e2bbae>Keep it wherever you keep important files. Dropbox? Google Drive? Microsoft One-Drive? Your company&#39;s CMS? It&#39;s totally up to you.</p><h2 data-v-69e2bbae>Play it back on demand</h2><p data-v-69e2bbae>Publish your archives on your website using a <a href="https://replayweb.page/docs/embedding" data-v-69e2bbae>little javascript</a>. Or, review them using the <a href="https://github.com/webrecorder/replayweb.page/releases/latest" data-v-69e2bbae>ReplayWeb.page App</a> or <a href="https://replayweb.page/" data-v-69e2bbae>ReplayWeb.page service</a>.</p></div>',1);i();const $r=xr(((e,t,a,r,n,s)=>{const o=g("TheMainHeader"),l=g("router-link");return c(),d(h,null,[u(o,{head:e.app_name},null,8,["head"]),Sr,Ur,u(l,{to:{name:"root"}},{default:xr((()=>[f(p(e.app_name),1)])),_:1}),Pr,u("div",jr,[u("div",Ir,[e.allow_signups?(c(),d(h,{key:0},[u("h2",null,"Sign up for "+p(e.app_name),1),u("form",Lr,[f(p(e.form)+" ",1),u("p",Rr,[f(p(e.app_name)+" is a service of ",1),Er,Fr,Br,Dr]),Hr])],64)):(c(),d(h,{key:1},[zr,u("p",null,[Or,u("a",{href:`mailto:${e.contact_email}?subject=Request%20A%20Capturing%20Account`},"let us know",8,["href"]),qr]),Mr,u("p",null,[u(l,{to:{name:"docs"}},{default:xr((()=>[Wr])),_:1})])],64))]),Vr])],64)}));Ar.render=$r,Ar.__scopeId="data-v-69e2bbae";const{mapActions:Nr}=o("user");var Zr={props:{fields:Array,submitText:{type:String,default:"Submit"},action:Function},data:()=>({processing:!1,displayValidations:!1,errors:{}}),computed:{fieldsWithDefaults(){return this.fields.map((e=>s({label:e.name.split("_").map(((e,t)=>t?e:e.charAt(0).toUpperCase()+e.slice(1))).join(" "),id:e.name+Date.now(),type:"text",readonly:!1,disabled:!1,required:!0},e)))},errorCount(){return Object.keys(this.errors).length}},watch:{errorCount(e){e&&this.displayValidations&&this.$nextTick((()=>this.$refs.errorsHeader.focus()))}},methods:s(s({},Nr(["changePassword"])),{getFieldByName(e){return this.fieldsWithDefaults.find((t=>t.name==e))},checkValidity(e){e.target.checkValidity()&&delete this.errors[e.target.name]},onInvalid(e){this.errors[e.target.name]=[{message:e.target.validationMessage}]},collectFrontendErrors(){this.errors={},this.$el.querySelectorAll(":invalid").forEach((e=>this.errors[e.name]=[{message:e.validationMessage}]))},submit(e){this.collectFrontendErrors(),this.displayValidations=!0,0==this.errorCount&&(this.processing=!0,this.action(new FormData(e.target)).then((()=>this.displayValidations=!1)).catch((e=>this.errors=e)).then((()=>this.processing=!1)))}})};const Gr=b();l("data-v-3bd1f487");const Kr={key:0,ref:"errorsHeader",tabindex:"-1",class:"invalid-feedback d-block"},Yr=f(" Please correct the following "),Jr=f("error"),Xr={key:1},Qr=f(": "),en=f(": "),tn={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};i();const an=Gr(((e,t,a,r,n,s)=>(c(),d("form",{onSubmit:t[3]||(t[3]=A(((...e)=>s.submit&&s.submit(...e)),["prevent"])),novalidate:""},[e.displayValidations&&s.errorCount?(c(),d("div",Kr,[Yr,1==s.errorCount?(c(),d(h,{key:0},[Jr],64)):(c(),d("strong",Xr,p(s.errorCount)+" errors",1)),Qr,u("ul",null,[(c(!0),d(h,null,U(e.errors,((e,t)=>(c(),d("li",null,["__all__"!=t?(c(),d(h,{key:0},[u("a",{href:"#"+s.getFieldByName(t).id},p(s.getFieldByName(t).label),9,["href"]),en],64)):m("",!0),f(" "+p(e.map((({message:e})=>e)).join(", ")),1)])))),256))])],512)):m("",!0),(c(!0),d(h,null,U(s.fieldsWithDefaults,(a=>(c(),d(h,null,[u("label",{for:a.id,class:"form-label mt-3"},p(a.label),9,["for"]),k(u("input",{"onUpdate:modelValue":e=>a.value=e,onBlur:t[1]||(t[1]=(...e)=>s.checkValidity&&s.checkValidity(...e)),onInvalid:t[2]||(t[2]=(...e)=>s.onInvalid&&s.onInvalid(...e)),name:a.name,id:a.id,type:a.type,class:["form-control",{"is-invalid":e.displayValidations&&e.errors[a.name],"is-valid":e.displayValidations&&!e.errors[a.name]}],required:a.required,disabled:!0===a.disabled||e.processing,readonly:a.readonly,"aria-invalid":!!e.errors[a.name],"aria-describedby":(e.errors[a.name]||[]).map(((e,t)=>a.id+"InvalidFeedback"+t))},null,42,["onUpdate:modelValue","name","id","type","required","disabled","readonly","aria-invalid","aria-describedby"]),[[I,a.value]]),(c(!0),d(h,null,U(e.errors[a.name],((e,t)=>(c(),d("div",{id:a.id+"InvalidFeedback"+t,class:"invalid-feedback"},p(e.message),9,["id"])))),256))],64)))),256)),u("button",{type:"submit",class:"btn btn-primary mt-3",disabled:e.processing},[e.processing?(c(),d("span",tn)):m("",!0),f(" "+p(a.submitText),1)],8,["disabled"])],32))));Zr.render=an,Zr.__scopeId="data-v-3bd1f487";const{mapActions:rn}=o("user");var nn={components:{TheMainHeader:Ae,BaseForm:Zr},data:()=>({fields:[{name:"username",label:"Email"},{name:"password",type:"password"}]}),methods:s(s({},rn(["login"])),{doLogin(e){return this.login(e).then((()=>window.location="/"))}})};const sn=b();l("data-v-3252e919");const on={class:"row justify-content-center"},ln={class:"col-4"},cn=u("hr",null,null,-1),dn={class:"small"},un=f(" Don't have an account? "),pn=f("Sign up"),hn={class:"small"},mn=f(" Forgot your password? "),bn=f("Reset password");i();const fn=sn(((e,t,a,r,n,s)=>{const o=g("TheMainHeader"),l=g("BaseForm"),i=g("router-link");return c(),d(h,null,[u(o,{head:"Log in"}),u("div",on,[u("div",ln,[u(l,{fields:e.fields,submitText:"Log in",action:s.doLogin},null,8,["fields","action"]),cn,u("p",dn,[un,u(i,{to:{name:"sign_up"}},{default:sn((()=>[pn])),_:1})]),u("p",hn,[mn,u(i,{to:{name:"password_reset"}},{default:sn((()=>[bn])),_:1})])])])],64)}));nn.render=fn,nn.__scopeId="data-v-3252e919";var gn={components:{TheMainHeader:Ae}};const yn=f(" You have logged out. "),wn=f("Log in again");gn.render=function(e,t,a,r,n,s){const o=g("TheMainHeader"),l=g("router-link");return c(),d(h,null,[u(o,{head:"Logged out"}),yn,u(l,{to:{name:"login"}},{default:P((()=>[wn])),_:1})],64)};const{mapActions:vn}=o("user");var _n={components:{BaseForm:Zr},data:()=>({fields:[{name:"first_name"},{name:"last_name"},{name:"email",type:"email"}]}),methods:s({},vn(["update"])),created(){for(const e of this.fields)e.value=this.$store.state.user[e.name]}};const kn=b()(((e,t,a,r,n,s)=>{const o=g("BaseForm");return c(),d(o,{fields:e.fields,action:e.update},null,8,["fields","action"])}));_n.render=kn,_n.__scopeId="data-v-97fa0e30";const{mapState:Tn,mapActions:Cn}=o("user");var An={components:{TheUserForm:_n,BaseForm:Zr},computed:Tn(["auth_token"]),methods:s({},Cn(["resetToken"]))};const xn=b();l("data-v-7ee2f47d");const Sn={class:"row mt-5 gx-5"},Un={class:"col"},Pn=u("h2",null,"Profile",-1),jn=u("h2",null,"Password",-1),In=f(" Change my password "),Ln={class:"col"},Rn=u("h2",null,"API",-1);i();const En=xn(((e,t,a,r,n,s)=>{const o=g("TheUserForm"),l=g("router-link"),i=g("BaseForm");return c(),d("div",Sn,[u("div",Un,[Pn,u(o),jn,u(l,{to:{name:"password_change"},class:"btn btn-primary mt-3"},{default:xn((()=>[In])),_:1})]),u("div",Ln,[Rn,u(i,{fields:[{name:"api-key",label:"Your API key",value:e.auth_token.key,readonly:!0}],action:e.resetToken,submitText:"Get a new key"},null,8,["fields","action"])])])}));An.render=En,An.__scopeId="data-v-7ee2f47d";const{mapActions:Fn}=o("user");var Bn={components:{TheMainHeader:Ae,BaseForm:Zr},data:()=>({fields:[{name:"old_password",type:"password"},{name:"new_password1",label:"New password",type:"password"},{name:"new_password2",label:"New password confirmation",type:"password"}]}),methods:s({},Fn(["changePassword"]))};const Dn=b();l("data-v-7818b484");const Hn={class:"row justify-content-center"};i();const zn=Dn(((e,t,a,r,n,s)=>{const o=g("TheMainHeader"),l=g("BaseForm");return c(),d(h,null,[u(o,{head:"Change password"}),u("div",Hn,[u(l,{fields:e.fields,action:e.changePassword,class:"col-4"},null,8,["fields","action"])])],64)}));Bn.render=zn,Bn.__scopeId="data-v-7818b484";const{mapActions:On}=o("user");var qn={components:{TheMainHeader:Ae,BaseForm:Zr},data:()=>({fields:[{name:"email",type:"email"}]}),methods:s({},On(["resetPassword"]))};const Mn={class:"row justify-content-center"};qn.render=function(e,t,a,r,n,s){const o=g("TheMainHeader"),l=g("BaseForm");return c(),d(h,null,[u(o,{head:"Forgot your password?",subhead:"We'll email you instructions for setting a new one."}),u("div",Mn,[u(l,{fields:e.fields,action:e.resetPassword,submitText:"Reset my password",class:"col-4"},null,8,["fields","action"])])],64)};const Wn=[{path:"/",name:"root",component:wt},{path:"/docs/",name:"docs",component:_t},{path:"/sign-up/",name:"sign_up",component:Ar},{path:"/user/login/",name:"login",component:nn},{path:"/user/logout/",name:"logout",component:gn},{path:"/user/account/",name:"account",component:An},{path:"/user/password_change/",name:"password_change",component:Bn},{path:"/user/password_reset/",name:"password_reset",component:qn}];var Vn=L({history:R(),routes:Wn});const $n=E(ce);$n.use(Ce),$n.use(Vn),$n.mount("#vue-app");
